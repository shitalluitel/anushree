{% extends 'base.html' %}
{% load staticfiles %}
{% load widget_tweaks %}

{% block page_name %}
    Stock
{% endblock %}

{% block page_description %}
    Update
{% endblock %}

{% block breadcrumbLink %}
    <li>
        <a href="#" class="breadcrumb-item">Stock</a>

    </li>
    <li>
        <a href="javascript:void(0)" class="breadcrumb-item active">Update</a>
    </li>
{% endblock %}


{% block body_content %}
    <div class="row">
        <div class="col-md-12 ">
            <div class="panel">
                <div class="panel-body">
                    <form method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <p style="font-weight: bold; font-size: 18px;">Item Detail</p>
                                    </div>
                                    <div class="panel-body">
                                        <table class="table table-striped">
                                            <tbody>

                                            <tr>
                                                <th>Pattern Name</th>
                                                <td id="pattern_name">-</td>
                                            </tr>
                                            <tr>
                                                <th>Pattern Code</th>
                                                <td id="pattern_code">-</td>
                                            </tr>
                                            <tr>
                                                <th>Size</th>
                                                <td id="size">-</td>
                                            </tr>
                                            <tr>
                                                <th>Stock</th>
                                                <td id="stock">-</td>
                                            </tr>
                                            <tr>
                                                <th>Price</th>
                                                <td id="price">-</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>


                            <div class="col-md-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <p style="font-weight: bold; font-size: 18px;">Stock Detail</p>
                                    </div>
                                    <div class="panel-body">
                                        {{ form.as_p }}
                                    </div>
                                </div>


                                <div class="form-group">
                                    <button type="submit" class="btn btn-block btn-primary">
                                        Pay
                                    </button>

                                </div>
                            </div>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_stylesheets %}
{% endblock %}

{% block extra_script %}
    <script>
        $('body').on('change', '#id_item', function () {
            var item = $(this).children('option:selected').val();
            var detail = $('#product-detail');

            if (item != '') {
                $.ajax({
                    url: '/api/products/tube/' + item + '/',
                    error: function () {
                        console.log("error");
                    },
                    success: function (data) {
                        for (i in data) {
                            $('#' + i).empty();
                            $('#' + i).append(data[i]);
                        }
                    },
                    type: 'GET'
                });
            }
        });
    </script>
{% endblock %}